<!-- HTML START -->
    <div class="element_beregner_picker custom-container">
        <div class="element_beregner_picker-inner">
            <div class="grid-x grid-x-main-picker">
                <div class="cell small-8 cell-picker">
                    <div class="button-picker custom-container">
                        <span class="button-picker-one">
                            <button id="one" class="selected">Elbil</button>
                        </span>
                        <span class="button-picker-two">
                            <button id="two">Plug-in-Hybrid</button>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="element_beregner custom-container">
        <div class="element_beregner-inner">
            <div class="grid-x grid-x-main">
                <div class="cell small-10 large-8 cell-beregner">
                    <div class="grid-x">
                        <div class="cell small-12 cell-main-title">
                            <h3>Find dit abonnement her</h3>
                        </div>
                    </div>

                    <form id="form_one" class="beregner-form">
                        <!-- <p>One</p> -->
                        <div class="grid-x grid-x-form">
                            <div class="cell small-12 large-6">

                                <div class="grid-x">
                                    <div class="cell small-12">
                                        <div class="batteri-storrelse">
                                            <label for="batteri-storrelse">Størrelse på bilens batteri:</label>
                                            <div class="grid-x grid-x-input">
                                                <div class="cell small-11" style="display:flex;align-items:center;">
                                                    <input type="text" id="batteri-storrelse" name="batteri-storrelse" onkeypress="validateNumber(event)" style="max-width: 80%;margin-right:15px;"><label>kWh</label>
                                                </div>
                                                <div class="cell small-1 cell-question">
                                                    <div class="cell-question-p cell-question-p-1">
                                                        <p><i class="fa fa-question-circle"></i></p>
                                                        <p class="question-box question-1">Et typisk bilbatteri i en mellemstor elbil er på 60 kWh. Du kan som udgangspunkt finde disse oplysninger i bilens tekniske specifikationer oplyst af producenten eller bilforhandleren.
Charge kan også hjælpe dig. <a href="https://www.charge.dk/contact-us">Klik her for at skrive til os.</a></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="cell small-12">
                                        <div class="raekkevide">
                                            <label for="raekkevide">Bilens rækkevidde ved fuld opladning:</label>
                                            <div class="grid-x grid-x-input">
                                                <div class="cell small-11" style="display:flex;align-items:center;">
                                                    <input type="text" id="raekkevide" name="raekkevide" onkeypress="validateNumber(event)" style="max-width: 80%;margin-right:15px;"><label>km</label>
                                                </div>
                                                <div class="cell small-1 cell-question">
                                                    <div class="cell-question-p cell-question-p-2">
                                                        <p><i class="fa fa-question-circle"></i></p>
                                                        <p class="question-box question-2">Elbilers rækkevidde afhænger af kørselsmønster og temperatur. En gennemsnitlig elbil kan typisk køre omkring 350 km på et fuldt opladet batteri.
Du kan som udgangspunkt finde disse oplysninger i bilens tekniske specifikationer oplyst af producenten eller bilforhandleren.
Charge kan også hjælpe dig. <a href="https://www.charge.dk/contact-us">Klik her for at skrive til os.</a></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="cell small-12">
                                        <div class="antal-km">
                                            <label for="antal-km">Antal kørte km om året:</label>
                                            <div class="grid-x grid-x-input">
                                                <div class="cell small-11" style="display:flex;align-items:center;">
                                                    <input type="text" id="antal-km" name="antal-km" onkeypress="validateNumber(event)" style="max-width: 80%;margin-right:15px;"><label>km</label>
                                                </div>
                                                <div class="cell small-1 cell-question">
                                                    <div class="cell-question-p cell-question-p-2">
                                                        <p><i class="fa fa-question-circle"></i></p>
                                                        <p class="question-box question-2">En almindelig familie kører som regel mellem 15-20.000 km om året.</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="cell small-12 large-6">
                                <div class="hidden-input">
                                    <input type="hidden" name="form_hidden_val" value="form_one">
                                </div>

                                <div class="grid-x">
                                    <div class="cell small-12">
                                        <div class="submit-button">
                                            <input type="submit" value="Find">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>

                    <form id="form_two" class="beregner-form">
                        <!-- <p>Two</p> -->
                        <div class="grid-x grid-x-form">
                            <div class="cell small-12 large-6">
                                <div class="grid-x">
                                    <div class="cell small-12">
                                        <div class="batteri-storrelse">
                                            <label for="batteri-storrelse">Størrelse på bilens batteri:</label>
                                            <div class="grid-x grid-x-input">
                                                <div class="cell small-11" style="display:flex;align-items:center;">
                                                    <input type="text" id="batteri-storrelse" name="batteri-storrelse" onkeypress="validateNumber(event)" style="max-width: 80%;margin-right:15px;"><label>kWh</label>
                                                </div>
                                                <div class="cell small-1 cell-question">
                                                    <div class="cell-question-p cell-question-p-1">
                                                        <p><i class="fa fa-question-circle"></i></p>
                                                        <p class="question-box question-1">Et typisk bilbatteri i en plug-in hybrid er på 9,8 kWh.
Du kan som udgangspunkt finde disse oplysninger i bilens tekniske specifikationer oplyst af producenten eller bilforhandleren.
Charge kan også hjælpe dig. <a href="https://www.charge.dk/contact-us">Klik her for at skrive til os.</a></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="cell small-12">
                                        <div class="raekkevide">
                                            <label for="raekkevide">Bilens rækkevidde ved fuld opladning:</label>
                                            <div class="grid-x grid-x-input">
                                                <div class="cell small-11" style="display:flex;align-items:center;">
                                                    <input type="text" id="raekkevide" name="raekkevide" onkeypress="validateNumber(event)" style="max-width: 80%;margin-right:15px;"><label>km</label>
                                                </div>
                                                <div class="cell small-1 cell-question">
                                                    <div class="cell-question-p cell-question-p-2">
                                                        <p><i class="fa fa-question-circle"></i></p>
                                                        <p class="question-box question-2">En plug-in hybridbils rækkevidde udelukkende på el er typisk omkring 50 km.
Du kan som udgangspunkt finde disse oplysninger i bilens tekniske specifikationer oplyst af producenten eller bilforhandleren.
Charge kan også hjælpe dig. <a href="https://www.charge.dk/contact-us">Klik her for at skrive til os.</a></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="cell small-12">
                                        <div class="antal-km">
                                            <label for="antal-km">Antal kørte km om året:</label>
                                            <div class="grid-x grid-x-input">
                                                <div class="cell small-11" style="display:flex;align-items:center;">
                                                    <input type="text" id="antal-km" name="antal-km" onkeypress="validateNumber(event)" style="max-width: 80%;margin-right:15px;"><label>km</label>
                                                </div>
                                                <div class="cell small-1 cell-question">
                                                    <div class="cell-question-p">
                                                        <div class="cell-question-p cell-question-p-2">
                                                            <p><i class="fa fa-question-circle"></i></p>
                                                            <p class="question-box question-2">En almindelig familie kører som regel mellem 15-20.000 km om året.</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="cell small-12 large-6">
                                <div class="hidden-input">
                                    <input type="hidden" name="form_hidden_val" value="form_two">
                                </div>

                                <div class="grid-x">
                                    <div class="cell small-12">
                                        <div class="submit-button">
                                            <input type="submit" value="Find">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>

    <div class="elberegner_result custom-container">
        <div class="elberegner_result-inner">
            <div class="grid-x grid-x-result">
                <div class="cell small-12 large-8 cell-price">
                    <div class="grid-x grid-x-result-inner">
                        <div class="cell small-12 large-12 cell-price-inner">
                            <div class="result-box">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- HTML END -->

    <!-- JS START -->
    <script defer type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <script defer type="text/javascript">
        // --- Validate Form (Numeric only)
$("input").each(function() {
            $(this).keypress(function() {
                validateNumber();
            })
        })
        function validateNumber(evt) {
            var theEvent = evt || window.event;
            if (theEvent.type === 'paste') {
                key = event.clipboardData.getData('text/plain');
            } else {
                var key = theEvent.keyCode || theEvent.which;
                key = String.fromCharCode(key);
            }
            var regex = /[0-9]|\./;
            if (!regex.test(key)) {
                theEvent.returnValue = false;
                if (theEvent.preventDefault) theEvent.preventDefault();
            }
        }
        $(document).ready(function() {
            $("#form_one").fadeIn();
            $(".button-picker button").click(function() {
                try {
                    $(".button-picker button").each(function() {
                        $(".selected").addClass("not-selected");
                        $(this).removeClass("selected");
                    })
                    $(".beregner-form").fadeOut();
                    $(".result-box").html("");
                    $(".result-box").removeClass("result-box-shown");
                } catch (err) {
                    console.log(err.message);
                } finally {
                    $(this).removeClass("not-selected");
                    $(this).addClass("selected");
                    var buttonText = $(this).text();
                    var buttonId = $(this).attr("id");
                    $(".type-beregner-content").text(buttonText);
                    setTimeout(function() {
                        $("#form_" + buttonId + "").fadeIn();
                    }, 750);
                    console.log(buttonId);
                }
                // console.log($(this).text());
            })

            // --- Form Submit
            $('form').submit(function(evt) {
                var antalKM = $("input[name='antal-km']", this).val();
                var bilBatteri = $("input[name='batteri-storrelse']", this).val();
                var raekkevide = $("input[name='raekkevide']", this).val();
                var formID = $("input[name='form_hidden_val']", this).val();
                antalKM = antalKM.replace(",", ".");;
                bilBatteri = bilBatteri.replace(",", ".");;
                raekkevide = raekkevide.replace(",", ".");;
                console.log(formID);

                if (formID == "form_one") {
                    // --- Elbil
                    console.log("ELBIL");
                    try {
                        // Elbil global
                        var bkWh = antalKM / (raekkevide / bilBatteri);
                        var kWhPRM = bkWh / 12.0;
                        var sPRkw = 2.1;
                        var arrayElbilPrices = [];
                        console.log(bkWh);

                        // Elbil -> Charge5
                        var charge5_version = 5;
                        var charge5_brugtekWh = kWhPRM;
                        var charge5_pris = 224;
                        var charge5_Kwh = 75;
                        if (charge5_brugtekWh > charge5_Kwh) {
                            var charge5_overkort = charge5_brugtekWh - charge5_Kwh;
                        } else {
                            var charge5_overkort = 0;
                        }
                        var charge5_prisOverkort = charge5_overkort * 1.75;
                        var charge5_godtGorelse = (charge5_brugtekWh * 2.1);
                        var charge5_afregningVerdo = (charge5_pris + charge5_prisOverkort - charge5_godtGorelse);
                        var charge5_afregningStrom = charge5_godtGorelse;
                        var charge5_totalPris = ((charge5_afregningVerdo) + charge5_afregningStrom);

                        // Elbil -> Charge10
                        var charge10_version = 10;
                        var charge10_brugtekWh = kWhPRM;
                        var charge10_pris = 299;
                        var charge10_Kwh = 150;
                        if (charge10_brugtekWh > charge10_Kwh) {
                            var charge10_overkort = charge10_brugtekWh - charge10_Kwh;
                        } else {
                            var charge10_overkort = 0;
                        }
                        var charge10_prisOverkort = charge10_overkort * 1.75;
                        var charge10_godtGorelse = (charge10_brugtekWh * 2.1);
                        var charge10_afregningVerdo = (charge10_pris + charge10_prisOverkort - charge10_godtGorelse);
                        var charge10_afregningStrom = charge10_godtGorelse;
                        var charge10_totalPris = ((charge10_afregningVerdo) + charge10_afregningStrom);

                        // Elbil -> Charge15
                        var charge15_version = 15;
                        var charge15_brugtekWh = kWhPRM;
                        var charge15_pris = 374;
                        var charge15_Kwh = 225;
                        if (charge15_brugtekWh > charge15_Kwh) {
                            var charge15_overkort = charge15_brugtekWh - charge15_Kwh;
                        } else {
                            var charge15_overkort = 0;
                        }
                        var charge15_prisOverkort = charge15_overkort * 1.75;
                        var charge15_godtGorelse = (charge15_brugtekWh * 2.1);
                        var charge15_afregningVerdo = (charge15_pris + charge15_prisOverkort - charge15_godtGorelse);
                        var charge15_afregningStrom = charge15_godtGorelse;
                        var charge15_totalPris = ((charge15_afregningVerdo) + charge15_afregningStrom);

                        // Elbil -> Charge20
                        var charge20_version = 20;
                        var charge20_brugtekWh = kWhPRM;
                        var charge20_pris = 449;
                        var charge20_Kwh = 300;
                        if (charge20_brugtekWh > charge20_Kwh) {
                            var charge20_overkort = charge20_brugtekWh - charge20_Kwh;
                        } else {
                            var charge20_overkort = 0;
                        }
                        var charge20_prisOverkort = charge20_overkort * 1.75;
                        var charge20_godtGorelse = (charge20_brugtekWh * 2.1);
                        var charge20_afregningVerdo = (charge20_pris + charge20_prisOverkort - charge20_godtGorelse);
                        var charge20_afregningStrom = charge20_godtGorelse;
                        var charge20_totalPris = ((charge20_afregningVerdo) + charge20_afregningStrom);

                        // Elbil -> Charge25
                        var charge25_version = 25;
                        var charge25_brugtekWh = kWhPRM;
                        var charge25_pris = 524;
                        var charge25_Kwh = 374;
                        if (charge25_brugtekWh > charge25_Kwh) {
                            var charge25_overkort = charge25_brugtekWh - charge25_Kwh;
                        } else {
                            var charge25_overkort = 0;
                        }
                        var charge25_prisOverkort = charge25_overkort * 1.75;
                        var charge25_godtGorelse = (charge25_brugtekWh * 2.1);
                        var charge25_afregningVerdo = (charge25_pris + charge25_prisOverkort - charge25_godtGorelse);
                        var charge25_afregningStrom = charge25_godtGorelse;
                        var charge25_totalPris = ((charge25_afregningVerdo) + charge25_afregningStrom);

                        // Elbil -> Charge30
                        var charge30_version = 30;
                        var charge30_brugtekWh = kWhPRM;
                        var charge30_pris = 599;
                        var charge30_Kwh = 450;
                        if (charge30_brugtekWh > charge30_Kwh) {
                            var charge30_overkort = charge30_brugtekWh - charge30_Kwh;
                        } else {
                            var charge30_overkort = 0;
                        }
                        var charge30_prisOverkort = charge30_overkort * 1.75;
                        var charge30_godtGorelse = (charge30_brugtekWh * 2.1);
                        var charge30_afregningVerdo = (charge30_pris + charge30_prisOverkort - charge30_godtGorelse);
                        var charge30_afregningStrom = charge30_godtGorelse;
                        var charge30_totalPris = ((charge30_afregningVerdo) + charge30_afregningStrom);

                        // Elbil -> Charge35
                        var charge35_version = 35;
                        var charge35_brugtekWh = kWhPRM;
                        var charge35_pris = 674;
                        var charge35_Kwh = 525;
                        if (charge35_brugtekWh > charge35_Kwh) {
                            var charge35_overkort = charge35_brugtekWh - charge35_Kwh;
                        } else {
                            var charge35_overkort = 0;
                        }
                        var charge35_prisOverkort = charge35_overkort * 1.75;
                        var charge35_godtGorelse = (charge35_brugtekWh * 2.1);
                        var charge35_afregningVerdo = (charge35_pris + charge35_prisOverkort - charge35_godtGorelse);
                        var charge35_afregningStrom = charge35_godtGorelse;
                        var charge35_totalPris = ((charge35_afregningVerdo) + charge35_afregningStrom);

                        // Elbil -> Charge40
                        var charge40_version = 40;
                        var charge40_brugtekWh = kWhPRM;
                        var charge40_pris = 749;
                        var charge40_Kwh = 600;
                        if (charge40_brugtekWh > charge40_Kwh) {
                            var charge40_overkort = charge40_brugtekWh - charge40_Kwh;
                        } else {
                            var charge40_overkort = 0;
                        }
                        var charge40_prisOverkort = charge40_overkort * 1.75;
                        var charge40_godtGorelse = (charge40_brugtekWh * 2.1);
                        var charge40_afregningVerdo = (charge40_pris + charge40_prisOverkort - charge40_godtGorelse);
                        var charge40_afregningStrom = charge40_godtGorelse;
                        var charge40_totalPris = ((charge40_afregningVerdo) + charge40_afregningStrom);

                        // Elbil -> Chargefri
                        var chargeFRI_version = 0;
                        var chargeFRI_brugtekWh = kWhPRM;
                        var chargeFRI_pris = 199;
                        var chargeFRI_Kwh = chargeFRI_brugtekWh;
                        if (chargeFRI_brugtekWh > chargeFRI_Kwh) {
                            var chargeFRI_overkort = chargeFRI_brugtekWh - chargeFRI_Kwh;
                        } else {
                            var chargeFRI_overkort = 0;
                        }
                        var chargeFRI_prisOverkort = chargeFRI_overkort * 1.75;
                        var chargeFRI_godtGorelse = (chargeFRI_brugtekWh * 1.12);
                        var chargeFRI_afregningVerdo = (chargeFRI_pris + chargeFRI_prisOverkort - chargeFRI_godtGorelse);
                        var chargeFRI_afregningStrom = (chargeFRI_brugtekWh) * 2.1;
                        var chargeFRI_totalPris = ((chargeFRI_afregningVerdo) + chargeFRI_afregningStrom);

                        console.log({
                            chargeFRI_brugtekWh
                        });
                        console.log({
                            chargeFRI_overkort
                        });
                        console.log({
                            chargeFRI_prisOverkort
                        });
                        console.log({
                            chargeFRI_godtGorelse
                        });
                        console.log({
                            chargeFRI_afregningVerdo
                        });
                        console.log({
                            chargeFRI_afregningStrom
                        });
                        console.log({
                            chargeFRI_totalPris
                        });

                    } catch (err) {
                        console.log(err.message);
                    } finally {
                        // arrayElbilPrices.push("charge5"+":"+charge5_totalPris, "charge10"+":"+charge10_totalPris, "charge15"+":"+charge15_totalPris, "charge20"+":"+charge20_totalPris, "charge25"+":"+charge25_totalPris, "charge30"+":"+charge30_totalPris, "charge35"+":"+charge35_totalPris, "charge40"+":"+charge40_totalPris, "chargeFRI"+":"+chargeFRI_totalPris);
                        arrayElbilPrices.push({
                            "charge_version": charge5_version,
                            "price": charge5_totalPris,
                            "url": "https://i.imgur.com/7zypE9f.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-5-1000388"
                        }, {
                            "charge_version": charge10_version,
                            "price": charge10_totalPris,
                            "url": "https://i.imgur.com/FR1I3W3.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-10-1000389"
                        }, {
                            "charge_version": charge15_version,
                            "price": charge15_totalPris,
                            "url": "https://i.imgur.com/bbKfU0o.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-15-1000390"
                        }, {
                            "charge_version": charge20_version,
                            "price": charge20_totalPris,
                            "url": "https://i.imgur.com/bjYUhsD.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-20-1000391"
                        }, {
                            "charge_version": charge25_version,
                            "price": charge25_totalPris,
                            "url": "https://i.imgur.com/aNZyu70.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-25-1000392"
                        }, {
                            "charge_version": charge30_version,
                            "price": charge30_totalPris,
                            "url": "https://i.imgur.com/FJStdRB.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-30-1000393"
                        }, {
                            "charge_version": charge35_version,
                            "price": charge35_totalPris,
                            "url": "https://i.imgur.com/58bvoNS.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-35-1000394"
                        }, {
                            "charge_version": charge40_version,
                            "price": charge40_totalPris,
                            "url": "https://i.imgur.com/nAa58rj.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-40-1000395"
                        }, {
                            "charge_version": chargeFRI_version,
                            "price": chargeFRI_totalPris,
                            "url": "https://i.imgur.com/qZnbC48.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-fri-1000387"
                        });
                        console.log(arrayElbilPrices);

                        function findBy(arr, key, comparatorFn) {
                            return arr.reduce(function(prev, curr, index, arr) {
                                return comparatorFn.call(arr, prev[key], curr[key]) ? prev : curr;
                            });
                        }

                        function minComp(prev, curr) {
                            return prev < curr;
                        }

                        var resultMinChargeVersion = findBy(arrayElbilPrices, 'price', minComp).charge_version;
                        var resultMinChargePrice = findBy(arrayElbilPrices, 'price', minComp).price;
                        var resultMinChargeURL = findBy(arrayElbilPrices, 'price', minComp).url;
                        var resultMinChargeLinkURL = findBy(arrayElbilPrices, 'price', minComp).linkUrl;
                        console.log("Charge " + findBy(arrayElbilPrices, 'price', minComp).charge_version);
                        console.log("Total Pris: " + findBy(arrayElbilPrices, 'price', minComp).price);
                        $(".result-box").addClass("result-box-shown");
                        // $(".result-box").html("<h5>Abonnement der passer til dit behov er:</h5><div class='result-box-shown-inner'><h2 class='result-charge-version'>Charge " + resultMinChargeVersion +
                        //     "</h2><h3 class='result-charge-price'>Total Pris: " + (Math.round(resultMinChargePrice * 100) / 100) + "</h3></div>");
                        $(".result-box").html("<div class='result-box-shown-inner'><h5 style='color:#fff;'>Abonnement der passer til dit behov er:</h5><a href='"+resultMinChargeLinkURL+"'><img src='"+resultMinChargeURL+"' referrerpolicy='no-referrer'></a></div>");

                        // min = Math.min.apply(null, arrayElbilPrices.map(function(item) {
                        //      return item.price;
                        //      console.log(this);
                        // })),
                        // console.log('min', min);
                    }
                } else {
                    // --- Hybrid
                    console.log("HYBRID TEST");
                    try {
                        // Hybrid global
                        var bkWh = (antalKM / (raekkevide / bilBatteri) * 70) / 100;
                        var kWhPRM = bkWh / 12.0;
                        var sPRkw = 2.1;
                        var percentBatteriKM = 70;
                        var arrayElbilPrices = [];
                        console.log(bkWh);

                        // Hybrid -> Charge5
                        var charge5_version = 5;
                        var charge5_brugtekWh = kWhPRM;
                        var charge5_pris = 224;
                        var charge5_Kwh = 75;
                        if (charge5_brugtekWh > charge5_Kwh) {
                            var charge5_overkort = charge5_brugtekWh - charge5_Kwh;
                        } else {
                            var charge5_overkort = 0;
                        }
                        var charge5_prisOverkort = charge5_overkort * 1.75;
                        var charge5_godtGorelse = (charge5_brugtekWh * 2.1);
                        var charge5_afregningVerdo = (charge5_pris + charge5_prisOverkort - charge5_godtGorelse);
                        var charge5_afregningStrom = charge5_godtGorelse;
                        var charge5_totalPris = ((charge5_afregningVerdo) + charge5_afregningStrom);

                        // Hybrid -> Charge10
                        var charge10_version = 10;
                        var charge10_brugtekWh = kWhPRM;
                        var charge10_pris = 299;
                        var charge10_Kwh = 150;
                        if (charge10_brugtekWh > charge10_Kwh) {
                            var charge10_overkort = charge10_brugtekWh - charge10_Kwh;
                        } else {
                            var charge10_overkort = 0;
                        }
                        var charge10_prisOverkort = charge10_overkort * 1.75;
                        var charge10_godtGorelse = (charge10_brugtekWh * 2.1);
                        var charge10_afregningVerdo = (charge10_pris + charge10_prisOverkort - charge10_godtGorelse);
                        var charge10_afregningStrom = charge10_godtGorelse;
                        var charge10_totalPris = ((charge10_afregningVerdo) + charge10_afregningStrom);

                        // Hybrid -> Charge15
                        var charge15_version = 15;
                        var charge15_brugtekWh = kWhPRM;
                        var charge15_pris = 374;
                        var charge15_Kwh = 225;
                        if (charge15_brugtekWh > charge15_Kwh) {
                            var charge15_overkort = charge15_brugtekWh - charge15_Kwh;
                        } else {
                            var charge15_overkort = 0;
                        }
                        var charge15_prisOverkort = charge15_overkort * 1.75;
                        var charge15_godtGorelse = (charge15_brugtekWh * 2.1);
                        var charge15_afregningVerdo = (charge15_pris + charge15_prisOverkort - charge15_godtGorelse);
                        var charge15_afregningStrom = charge15_godtGorelse;
                        var charge15_totalPris = ((charge15_afregningVerdo) + charge15_afregningStrom);

                        // Hybrid -> Charge20
                        var charge20_version = 20;
                        var charge20_brugtekWh = kWhPRM;
                        var charge20_pris = 449;
                        var charge20_Kwh = 300;
                        if (charge20_brugtekWh > charge20_Kwh) {
                            var charge20_overkort = charge20_brugtekWh - charge20_Kwh;
                        } else {
                            var charge20_overkort = 0;
                        }
                        var charge20_prisOverkort = charge20_overkort * 1.75;
                        var charge20_godtGorelse = (charge20_brugtekWh * 2.1);
                        var charge20_afregningVerdo = (charge20_pris + charge20_prisOverkort - charge20_godtGorelse);
                        var charge20_afregningStrom = charge20_godtGorelse;
                        var charge20_totalPris = ((charge20_afregningVerdo) + charge20_afregningStrom);

                        // Hybrid -> Charge25
                        var charge25_version = 25;
                        var charge25_brugtekWh = kWhPRM;
                        var charge25_pris = 524;
                        var charge25_Kwh = 374;
                        if (charge25_brugtekWh > charge25_Kwh) {
                            var charge25_overkort = charge25_brugtekWh - charge25_Kwh;
                        } else {
                            var charge25_overkort = 0;
                        }
                        var charge25_prisOverkort = charge25_overkort * 1.75;
                        var charge25_godtGorelse = (charge25_brugtekWh * 2.1);
                        var charge25_afregningVerdo = (charge25_pris + charge25_prisOverkort - charge25_godtGorelse);
                        var charge25_afregningStrom = charge25_godtGorelse;
                        var charge25_totalPris = ((charge25_afregningVerdo) + charge25_afregningStrom);

                        // Hybrid -> Charge30
                        var charge30_version = 30;
                        var charge30_brugtekWh = kWhPRM;
                        var charge30_pris = 599;
                        var charge30_Kwh = 450;
                        if (charge30_brugtekWh > charge30_Kwh) {
                            var charge30_overkort = charge30_brugtekWh - charge30_Kwh;
                        } else {
                            var charge30_overkort = 0;
                        }
                        var charge30_prisOverkort = charge30_overkort * 1.75;
                        var charge30_godtGorelse = (charge30_brugtekWh * 2.1);
                        var charge30_afregningVerdo = (charge30_pris + charge30_prisOverkort - charge30_godtGorelse);
                        var charge30_afregningStrom = charge30_godtGorelse;
                        var charge30_totalPris = ((charge30_afregningVerdo) + charge30_afregningStrom);

                        // Hybrid -> Charge35
                        var charge35_version = 35;
                        var charge35_brugtekWh = kWhPRM;
                        var charge35_pris = 674;
                        var charge35_Kwh = 525;
                        if (charge35_brugtekWh > charge35_Kwh) {
                            var charge35_overkort = charge35_brugtekWh - charge35_Kwh;
                        } else {
                            var charge35_overkort = 0;
                        }
                        var charge35_prisOverkort = charge35_overkort * 1.75;
                        var charge35_godtGorelse = (charge35_brugtekWh * 2.1);
                        var charge35_afregningVerdo = (charge35_pris + charge35_prisOverkort - charge35_godtGorelse);
                        var charge35_afregningStrom = charge35_godtGorelse;
                        var charge35_totalPris = ((charge35_afregningVerdo) + charge35_afregningStrom);

                        // Hybrid -> Charge40
                        var charge40_version = 40;
                        var charge40_brugtekWh = kWhPRM;
                        var charge40_pris = 749;
                        var charge40_Kwh = 600;
                        if (charge40_brugtekWh > charge40_Kwh) {
                            var charge40_overkort = charge40_brugtekWh - charge40_Kwh;
                        } else {
                            var charge40_overkort = 0;
                        }
                        var charge40_prisOverkort = charge40_overkort * 1.75;
                        var charge40_godtGorelse = (charge40_brugtekWh * 2.1);
                        var charge40_afregningVerdo = (charge40_pris + charge40_prisOverkort - charge40_godtGorelse);
                        var charge40_afregningStrom = charge40_godtGorelse;
                        var charge40_totalPris = ((charge40_afregningVerdo) + charge40_afregningStrom);

                        // Hybrid -> Chargefri
                        var chargeFRI_version = 0;
                        var chargeFRI_brugtekWh = kWhPRM;
                        var chargeFRI_pris = 199;
                        var chargeFRI_Kwh = chargeFRI_brugtekWh;
                        if (chargeFRI_brugtekWh > chargeFRI_Kwh) {
                            var chargeFRI_overkort = chargeFRI_brugtekWh - chargeFRI_Kwh;
                        } else {
                            var chargeFRI_overkort = 0;
                        }
                        var chargeFRI_prisOverkort = chargeFRI_overkort * 1.75;
                        var chargeFRI_godtGorelse = (chargeFRI_brugtekWh * 1.12);
                        var chargeFRI_afregningVerdo = (chargeFRI_pris + chargeFRI_prisOverkort - chargeFRI_godtGorelse);
                        var chargeFRI_afregningStrom = (chargeFRI_brugtekWh) * 2.1;
                        var chargeFRI_totalPris = ((chargeFRI_afregningVerdo) + chargeFRI_afregningStrom);

                        console.log({
                            chargeFRI_brugtekWh
                        });
                        console.log({
                            chargeFRI_overkort
                        });
                        console.log({
                            chargeFRI_prisOverkort
                        });
                        console.log({
                            chargeFRI_godtGorelse
                        });
                        console.log({
                            chargeFRI_afregningVerdo
                        });
                        console.log({
                            chargeFRI_afregningStrom
                        });
                        console.log({
                            chargeFRI_totalPris
                        });

                    } catch (err) {
                        console.log(err.message);
                    } finally {
                        // arrayElbilPrices.push("charge5"+":"+charge5_totalPris, "charge10"+":"+charge10_totalPris, "charge15"+":"+charge15_totalPris, "charge20"+":"+charge20_totalPris, "charge25"+":"+charge25_totalPris, "charge30"+":"+charge30_totalPris, "charge35"+":"+charge35_totalPris, "charge40"+":"+charge40_totalPris, "chargeFRI"+":"+chargeFRI_totalPris);
                        arrayElbilPrices.push({
                            "charge_version": charge5_version,
                            "price": charge5_totalPris,
                            "url": "https://i.imgur.com/7zypE9f.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-5-1000388"
                        }, {
                            "charge_version": charge10_version,
                            "price": charge10_totalPris,
                            "url": "https://i.imgur.com/FR1I3W3.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-10-1000389"
                        }, {
                            "charge_version": charge15_version,
                            "price": charge15_totalPris,
                            "url": "https://i.imgur.com/bbKfU0o.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-15-1000390"
                        }, {
                            "charge_version": charge20_version,
                            "price": charge20_totalPris,
                            "url": "https://i.imgur.com/bjYUhsD.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-20-1000391"
                        }, {
                            "charge_version": charge25_version,
                            "price": charge25_totalPris,
                            "url": "https://i.imgur.com/aNZyu70.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-25-1000392"
                        }, {
                            "charge_version": charge30_version,
                            "price": charge30_totalPris,
                            "url": "https://i.imgur.com/FJStdRB.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-30-1000393"
                        }, {
                            "charge_version": charge35_version,
                            "price": charge35_totalPris,
                            "url": "https://i.imgur.com/58bvoNS.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-35-1000394"
                        }, {
                            "charge_version": charge40_version,
                            "price": charge40_totalPris,
                            "url": "https://i.imgur.com/nAa58rj.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-40-1000395"
                        }, {
                            "charge_version": chargeFRI_version,
                            "price": chargeFRI_totalPris,
                            "url": "https://i.imgur.com/qZnbC48.png",
                            "linkUrl": "https://www.charge.dk/abonnementer/charge-fri-1000387"
                        });
                        console.log(arrayElbilPrices);

                        function findBy(arr, key, comparatorFn) {
                            return arr.reduce(function(prev, curr, index, arr) {
                                return comparatorFn.call(arr, prev[key], curr[key]) ? prev : curr;
                            });
                        }

                        function minComp(prev, curr) {
                            return prev < curr;
                        }

                        var resultMinChargeVersion = findBy(arrayElbilPrices, 'price', minComp).charge_version;
                        var resultMinChargePrice = findBy(arrayElbilPrices, 'price', minComp).price;
                        var resultMinChargeURL = findBy(arrayElbilPrices, 'price', minComp).url;
                        var resultMinChargeLinkURL = findBy(arrayElbilPrices, 'price', minComp).linkUrl;
                        console.log("Charge " + findBy(arrayElbilPrices, 'price', minComp).charge_version);
                        console.log("Total Pris: " + findBy(arrayElbilPrices, 'price', minComp).price);
                        $(".result-box").addClass("result-box-shown");
                        // $(".result-box").html("<h5>Abonnement der passer til dit behov er:</h5><div class='result-box-shown-inner'><h2 class='result-charge-version'>Charge " + resultMinChargeVersion +
                        //     "</h2><h3 class='result-charge-price'>Total Pris: " + (Math.round(resultMinChargePrice * 100) / 100) + "</h3></div>");
                        $(".result-box").html("<div class='result-box-shown-inner'><h5 style='color:#fff;'>Abonnement der passer til dit behov er:</h5><a href='"+resultMinChargeLinkURL+"'><img src='"+resultMinChargeURL+"' referrerpolicy='no-referrer'></a></div>");

                        // min = Math.min.apply(null, arrayElbilPrices.map(function(item) {
                        //      return item.price;
                        //      console.log(this);
                        // })),
                        // console.log('min', min);
                    }
                }

                evt.preventDefault();

            });
        });
    </script>
    <!-- JS END -->
